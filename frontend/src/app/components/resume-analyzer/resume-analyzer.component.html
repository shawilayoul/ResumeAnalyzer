<div class="container" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="16px">
  <mat-card class="analyzer-card">
    <mat-card-header>
      <div mat-card-avatar class="analyzer-icon">
        <mat-icon>description</mat-icon>
      </div>
      <mat-card-title>Resume Analyzer</mat-card-title>
      <mat-card-subtitle>Get instant career insights</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="upload-section" fxLayout="column" fxLayoutAlign="center center">
        <input #fileInput hidden type="file" (change)="onFileSelected($event)" accept=".pdf,.docx">
        
        <button mat-raised-button color="primary" (click)="fileInput.click()">
          <mat-icon>upload</mat-icon>
          Choose File
        </button>
        
        <div class="selected-file" *ngIf="selectedFile">
          <mat-icon>description</mat-icon>
          {{ selectedFile.name }}
          <mat-icon class="remove-icon" (click)="clearFile()">close</mat-icon>
        </div>

        <button mat-raised-button 
                color="accent" 
                class="analyze-button"
                (click)="uploadResponse"
                [disabled]="!selectedFile || isLoading">
          <span *ngIf="!isLoading">Analyze Resume</span>
          <span *ngIf="isLoading">
            <mat-spinner diameter="24"></mat-spinner>
            Analyzing...
          </span>
        </button>
      </div>

      <div *ngIf="uploadResponse" class="results-section">
        <mat-divider></mat-divider>

        <div class="success-message">
          <mat-icon class="success-icon">check_circle</mat-icon>
          <h3>Analysis Complete!</h3>
          <p class="status">Status: {{ uploadResponse.status }}</p>
        </div>

        <mat-accordion class="analysis-details">
          <mat-expansion-panel expanded="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <mat-icon>assessment</mat-icon>
                Detailed Analysis
              </mat-panel-title>
            </mat-expansion-panel-header>
            <p class="analysis-text">{{ uploadResponse.analysis }}</p>
          </mat-expansion-panel>

          <mat-expansion-panel *ngIf="uploadResponse.suggestedJobRoles?.length">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <mat-icon>work</mat-icon>
                Suggested Roles ({{ uploadResponse.suggestedJobRoles.length }})
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-list>
              <mat-list-item *ngFor="let role of uploadResponse.suggestedJobRoles">
                <mat-icon matListIcon>arrow_forward</mat-icon>
                <h4 matLine>{{ role }}</h4>
              </mat-list-item>
            </mat-list>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </mat-card-content>
  </mat-card>
</div>